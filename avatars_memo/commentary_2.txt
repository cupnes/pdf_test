[PDF解説-2] ページ集合について

ページ集合(/Type /Pages)のオブジェクトについて簡単に説明します。

ページ集合は、ページオブジェクト(/Type /Page)をひとまとめにしているオブジェクトです。
このオブジェクトでまとめられているページがPDFを開いた際に1ページずつ並ぶことになります。

このPDFでは以下のように定義しています。

==
3 0 obj
	<<	/Type /Pages
		/Resources	<<	/Font	<<	/F1 19 0 R
							/F2 10 0 R
							/F3 6 0 R
							/F4 24 0 R
						>>
					/XObject
						<<	/Im1 14 0 R
							/Im2 46 0 R
							/Im3 91 0 R
						>>
				>>
		/MediaBox [0 0 320 240]
		/Kids	[	32 0 R	% help
				17 0 R	% file list
				15 0 R	% title
				4 0 R	% intro(p1)
				...
				420 0 R
			]
		/Count 195
	>>
endobj
==

「/Kids」の部分で、どのページをどの順に並べるかを決めています。
「32 0 R」や「17 0 R」が、それぞれ、ページオブジェクトへの参照です。
PDFでは「オブジェクト番号 世代番号 R」と書くとそのオブジェクトを参照できます。

ここで参照している「32 0 R」や「17 0 R」はそれぞれページオブジェクトで、
PDFを開いた際、この並び順でページが表示されます。
(例えば、このPDFの1ページ目はオブジェクト番号32番で、2ページ目はオブジェクト番号17番、
3ページ目はオブジェクト番号15番、となります。)

そして、「/Count」は総ページ数です。/Kidsに並ぶページの数をここに設定します。
このPDFの場合、総ページ数が195ページであることがここからわかります。

「/Resources」では「フォント」や「画像」等を参照する際の名前を付けています。
ここでは、「/Font(フォント)」と「/XObject(このPDFでは全て画像)」の2種類のリソースに参照名を付けていて、
オブジェクト番号19番で定義しているフォントへ「/F1」という名前で参照できるように、
同様に、オブジェクト番号10番のフォントへは「/F2」、オブジェクト番号6番のフォントへは「/F3」で参照できるようにしています。
(画像についても同様に「/Im1」・「/Im2」・「/Im3」という参照名を付けています。)

ページに描画する内容は、ページオブジェクト(/Type /Page)内の「/Contents」で参照する先のストリーム(「stream」〜「endstream」の間)で定義しますが、
そのストリームでは、/F1や/Im1などの参照名でリソースを参照しながら描画する内容を定義します。
