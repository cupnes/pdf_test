[PDF解説-3] 文字の描画その1(ASCII)

画面に描画する内容は、ページオブジェクト(/Type /Page)の「/Contents」の参照先のストリーム(「stream」から「endstream」の間)で定義します。
ここでは、ストリームでの文字描画を簡単に説明します。

てっとり早く例を示すと、迷宮内のページオブジェクトで参照されるストリームの末尾に
以下の内容を追加すると、画面中央に「Hello world!」という文字列を描画できます。

==
	1 1 1 rg

	BT
	120 110 Td
	/F4 16 Tf
	(Hello world!)Tj
	ET
endstream
endobj
==

「1 1 1 rg」は塗りの色(ここでは文字色)をR G Bで設定しています。各色で値の範囲は0〜1で、0と1の間は小数で設定します。全て1にして文字色に白を設定しています。
(ちなみに、矩形などのように「塗り」と「線」でそれぞれ色が分かれる場合、線の色は末尾を「RG」と共に大文字にすることで設定できます。)

そして、「BT」から「ET」の間で文字描画に関する定義を行います。

「120 110 Td」では文字あるいは文字列の描画開始位置を設定しています。「X Y Td」というフォーマットなので、この場合「X=120、Y=110」の位置から描画を始めることになります。
このPDFは「320x240」のサイズなので、この位置から描画を始めるとだいたい画面の真ん中辺りになります。
(ちなみに、PDFでは原点(0,0)は画面左下です。)

「/F4 16 Tf」は「フォント参照名 フォントサイズ Tf」というフォーマットで、どのフォントを使うかを参照名で、フォントサイズも合わせて設定します。
ここでは「/F4」のフォント(Helveticaフォント)でフォントサイズを16にしています。

「(Hello world!)Tj」で、描画する文字列を定義しています。

この例を参考にすれば、PDFの好きな場所に、ASCII文字でなら、好きなように文字を描画できます。
