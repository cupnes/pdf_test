[PDF解説-5] クリックでジャンプする仕組み

ページ内をクリックすると別のページへジャンプする仕組みはアノテーションという機能を使って実現しています。

これも例を紹介します。

以下はこのPDFの1ページ目のページオブジェクトの抜粋です。
==
32 0 obj
	<<	/Type /Page
		/Parent 3 0 R
		/Annots [9 0 R]
		/Contents 33 0 R
	>>
endobj
==

アノテーションに関する定義は「/Annots [9 0 R]」の部分です。

オブジェクト番号9番の定義は以下のようになっています。
==
9 0 obj
	<<	/Type /Annot
		/Subtype /Link
		/Rect [293 213 308 228]
		/Border [0 0 0]
		/Dest [17 0 R /Fit]
	>>
endobj
==

「/Type /Annot」とある通り、これはアノテーションに関するオブジェクトです。

「/Subtype /Link」で、これが「リンクアノテーション」という種類のアノテーションであると設定しています。
「リンクアノテーション」は、クリックした際に、別のページへジャンプしたり、設定されたURLを開いたりするものです。

「/Rect [293 213 308 228]」で、クリック領域を矩形で設定しています。
領域を左下の座標と右上の座標で定義していて、「/Rect [左下X座標 左下Y座標 右上X座標 右上Y座標]」というフォーマットです。

「/Border [0 0 0]」では、クリック領域を示す線の描画について設定しています。
仕様書によると、3つ並んだ数字の1つ目が「水平コーナー半径」、2つ目が「垂直コーナー半径」、3つ目が「線の幅」とのことですが、
1つ目と2つ目の「コーナー半径」はどのように反映されるものなのかよく分かっていません。
筆者は主に3つ目の「線の幅」だけを使って、デバッグ用にクリック領域を示したりしています。
(0より大きい値を設定するとその太さで線が描画されます。0を指定すると線は非表示になります。)

最後に、「/Dest [17 0 R /Fit]」で、クリックした際のジャンプ先のページオブジェクトを指定しています。
